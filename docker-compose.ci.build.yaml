version: "3.8"

services:
  icarus-edge-baseimage:
    build:
      context: docker
      dockerfile: Dockerfile
      args:
        - BASE_IMAGE=nvcr.io/nvidia/l4t-tensorrt:r8.2.1-runtime
        - OPENCV_VERSION=4.4.0
    image: cricarusdev.azurecr.io/icarus-edge-baseimage

  icarus-edge-detector:
    build:
      context: icarus-edge-detector
      dockerfile: Dockerfile.${BUILD_ENVIRONMENT}
      args:
        - BASE_IMAGE=cricarusdev.azurecr.io/icarus-edge-baseimage:2023-01-22
    image: cricarusdev.azurecr.io/icarus-edge-detector
